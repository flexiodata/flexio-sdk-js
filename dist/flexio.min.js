/*!
 * Flex.io Javascript SDK v1.28.2 (https://github.com/flexiodata/flexio-sdk-js)
 * (c) 2018 Gold Prairie LLC
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Flexio=e():t.Flexio=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function r(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t,e,n){var o=Array.isArray(e)?e:e.replace(/(\[(\d)\])/g,".$2").split(".").filter(function(t){return t.length});return o.length?r(t)||Array.isArray(t)?i(t[o.shift()],o,n):n:void 0===t?n:t}function o(t,e){var n=Array.from(arguments);n.shift();for(var r=0;r<n.length;++r)for(var i in n[r])n[r].hasOwnProperty(i)&&(t[i]=n[r][i]);return t}function s(t,e){if(null==t||!Array.isArray(e))return{};for(var n,r={},i=0;i<e.length;++i)n=e[i],t.hasOwnProperty(n)&&(r[n]=t[n]);return r}t.exports={isPlainObject:r,assign:o,pick:s,get:i,isString:function(t){return"string"==typeof t||t instanceof String},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isNil:function(t){return null==t},defaultTo:function(t,e){return null==t||t!==t?e:t},last:function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},isFunction:function(t){return t instanceof Function},has:function(t,e){return t.hasOwnProperty(e)},cloneDeep:function(t){return JSON.parse(JSON.stringify(t))}}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i={};t.exports=i,i.isPipeObject=function(t){return"object"===(void 0===t?"undefined":r(t))&&t.hasOwnProperty("pipe")&&"object"===r(t.pipe)},i.isPipeJson=function(t){return"object"===(void 0===t?"undefined":r(t))&&t.hasOwnProperty("op")&&t.hasOwnProperty("params")},i.isNodeJs=function(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)},i.toBase64=function(t){try{return i.isNodeJs()?Buffer(t,"utf8").toString("base64"):btoa(unescape(encodeURIComponent(t)))}catch(t){return t}},i.fromBase64=function(t){try{return i.isNodeJs()?Buffer.from(t,"base64").toString("utf8"):decodeURIComponent(escape(atob(t)))}catch(t){return t}},i.queryString=function(t){return i.isNodeJs()?n(!function(){var t=new Error('Cannot find module "querystring"');throw t.code="MODULE_NOT_FOUND",t}()).stringify(t):Object.keys(t).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(data[t])}).join("&")},i.arrayBufferToString=function(t){if(this.isNodeJs())return t instanceof Buffer?t.toString("utf-8"):Buffer.from(t).toString("utf-8");if("TextDecoder"in window)return new TextDecoder("utf-8").decode(t);var e,n=new Uint8Array(t),r="",i=n.length;for(e=0;e<i;++e)r+=String.fromCharCode(n[e]);return decodeURIComponent(escape(r))},i.callbackAdapter=function(t,e,n,r,i){"function"==typeof i?i(t,e):t?r(t):n(e)},i.getTaskParams=function(t){var e=JSON.parse(JSON.stringify(t));return delete e.op,delete e.eid,e},t.exports.getUtilObject=function(t){return new function(){for(var e in i)i.hasOwnProperty(e)&&(this[e]=i[e]);this.debug=function(e){if(t.getConfig().debug){var e="flexio-sdk-js: "+e;console.log(e)}return this}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3);e.default=r},function(t,e,n){"use strict";var r=n(0),i=n(4),o={_init:function(){this.config={token:"",host:"api.flex.io",insecure:!1,debug:!1},this.connections=n(30).getConnectionsObject(this),this.pipes=n(31).getPipesObject(this),this.util=n(1).getUtilObject(this),this._http=null,this.version=this.util.isNodeJs()?n(!function(){var t=new Error('Cannot find module "../package.json"');throw t.code="MODULE_NOT_FOUND",t}()).version:"1.28.2";var t=n(32).getPipeConstructor;this.pipe=t(this);var e=n(33).getConnectionConstructor;this.connection=e(this)},setup:function(t,e){return delete this.config.baseUrl,r.assign(this.config,{token:t},e),this._http=null,this._createHttp(),this},getConfig:function(){if(!this.config.baseUrl){var t="https://"+this.config.host+"/v1";r.assign(this.config,{baseUrl:t})}return r.assign({},this.config)},http:function(){return this._http||this._createHttp(),this._http},task:i,_createHttp:function(){var t=this.getConfig(),e={baseURL:t.baseUrl,headers:{Authorization:"Bearer "+t.token},insecure:!0===t.insecure};this._http=n(34).create(e)}};o._init(),t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(5),o=n(6),s=n(7),a=n(8),u=n(9),c=n(10),f=n(11),p=n(12),l=n(13),d=n(14),g=n(15),h=n(16),y=n(17),m=n(18),v=n(19),b=n(20),O=n(21),S=n(22),P=n(23),C=n(24),x=n(25),k=n(26),w=n(27),T=n(28),j=n(29),A=function(t,e){switch(r.get(t,"op","")){default:return w.toCode(t);case"connect":return i.toCode(t,e);case"convert":return o.toCode(t,e);case"copy":return s.toCode(t,e);case"create":return a.toCode(t,e);case"dump":return u.toCode(t,e);case"echo":return c.toCode(t,e);case"email":return f.toCode(t,e);case"execute":return p.toCode(t,e);case"filter":return l.toCode(t,e);case"foreach":return d.toCode(t,e);case"insert":return g.toCode(t,e);case"limit":return h.toCode(t,e);case"list":return v.toCode(t,e);case"merge":return y.toCode(t,e);case"mkdir":return m.toCode(t,e);case"read":return b.toCode(t,e);case"render":return O.toCode(t,e);case"request":return S.toCode(t,e);case"select":return P.toCode(t,e);case"sequence":return C.toCode(t,e);case"set":return x.toCode(t,e);case"sleep":return k.toCode(t,e);case"transform":return T.toCode(t,e);case"write":return j.toCode(t,e)}};t.exports={connect:i,convert:o,copy:s,create:a,dump:u,echo:c,email:f,execute:p.execute,insert:g,filter:l,foreach:d,javascript:p.javascript,limit:h,list:v,merge:y,mkdir:m,python:p.python,read:b,render:O,request:S,select:P,sequence:C,set:x,sleep:k,task:w,transform:T,write:j,toCode:A}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){return r.assign({},t,{op:"connect"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return"connect("+JSON.stringify(n)+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t,e){var n={input:t,output:e};return r.assign({},n,{op:"convert"})};o.toCode=function(t,e){var n=i.getTaskParams(t),o=r.get(n,"input",{}),s=r.get(n,"output",{});return"convert("+JSON.stringify(o)+", "+JSON.stringify(s)+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t,e,n){var i={from:t,to:e};return r.isPlainObject(n)&&(i.options=n),r.assign({},i,{op:"copy"})};o.toCode=function(t,e){var n=i.getTaskParams(t),o=JSON.stringify(n.from)||'""',s=JSON.stringify(n.to)||'""',a=n.hasOwnProperty("options")&&r.isPlainObject(n.options)?JSON.stringify(n.options):null,u="copy("+o+", "+s;return null!==a&&(u+=", "+a),u+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t,e){if(!Array.isArray(t)){var n={path:t};return void 0!==e&&(Array.isArray(e)?n.columns=e:n.content_type=e),r.assign({},n,{op:"create"})}var n={content_type:"application/vnd.flexio.table",columns:t}};o.toCode=function(t,e){var n=i.getTaskParams(t),r=JSON.stringify(n.path)||void 0,o=JSON.stringify(n.content_type)||void 0,s=JSON.stringify(n.columns)||void 0;return void 0!==r?void 0!==s?"create("+r+", "+s+")":void 0!==o?"create("+r+", "+o+")":"create("+r+")":void 0!==s?"create("+s+")":void 0!==o?"":void 0},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){return r.assign({},{msg:t},{op:"dump"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return"dump("+(JSON.stringify(n.msg)||'""')+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){return r.assign({},{msg:t},{op:"echo"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return"echo("+(JSON.stringify(n.msg)||'""')+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t,e){var n={};return r.isPlainObject(t)?r.assign(n,t):n.connection=t,r.isPlainObject(e)&&r.assign(n,e),r.assign({},n,{op:"email"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return"email("+JSON.stringify(n,null,2)+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){var e;try{e=t.toString(),e=e.substring(e.indexOf("{")+1,e.lastIndexOf("}"))}catch(t){e=""}return e},s=function(t){if(r.isString(t))return t;if(r.isFunction(t)){var e;if(0==t.length)return"exports.flexio_handler = function(context) "+(e=o(t));if(e=t.toString(),"function"==e.substring(0,8))e=e.slice(8);else{var n=e.indexOf("=>"),i=e.indexOf("{");n>=0&&n<i&&(e=e.replace("=>s*{","{"))}return"exports.flexio_handler = function"+e}},a=function(){var t,e,n,o=Array.from(arguments),a=r.get(o,"[0]"),u=r.get(o,"[1]"),c=r.get(o,"[2]"),f={};"python"==a||"javascript"==a?(t=a,e=u,n=c):(t="javascript",e=a,n=u),e||(e=""),"javascript"==t&&(e=s(e)),f.lang=t;var p=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;return e.match(p)?f.path=e:f.code=i.toBase64(e),n&&(f.integrity=n),r.assign({},f,{op:"execute"})},u=function(){var t=Array.from(arguments);return t.unshift("javascript"),a.apply(this,t)},c=function(){var t=Array.from(arguments);return t.unshift("python"),a.apply(this,t)},f=function(t){var e=i.getTaskParams(t),n=e.lang||"",r=i.fromBase64(e.code||"");switch(n){case"javascript":return-1!=r.indexOf("exports.flexio_handler")?(r=r.replace("exports.flexio_handler =",""),"javascript("+r.trim()+")"):"javascript("+JSON.stringify(r.trim())+")";case"python":return"python(`\n"+r+"\n`)";default:return"execute("+JSON.stringify(n)+", `\n"+r+"\n`)"}};t.exports={execute:a,javascript:u,python:c,toCode:f}},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){return r.assign({},{where:t},{op:"filter"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return"filter("+(JSON.stringify(n.where)||'""')+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t,e){var n={};return("string"==typeof t||t instanceof String)&&(n.spec=t),i.isPipeObject(t)?n.run=t.pipe.task:i.isPipeObject(e)&&(n.run=e.pipe.task),r.assign({},n,{op:"foreach"})};o.toCode=function(t,e){var n=i.getTaskParams(t),r=[];return n.hasOwnProperty("spec")&&r.push(JSON.stringify(n.spec)),n.hasOwnProperty("run")&&r.push(e.task.toCode(n.run,e)),"foreach("+r.join(", ")+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t,e){var n;return n=Array.isArray(e)?e:[e],r.assign({},{path:t,values:n},{op:"insert"})};o.toCode=function(t,e){var n=i.getTaskParams(t),o=r.get(n,"path",void 0),s=r.get(n,"values",void 0);return Array.isArray(s)||(s=[s]),o=JSON.stringify(o),s=JSON.stringify(s),"insert("+o+", "+s+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){return r.assign({},{value:t},{op:"limit"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return"limit("+(JSON.stringify(n.value)||"")+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){if(Array.isArray(t))var e=t;else for(var e=[],n=0;n<arguments.length;++n)e.push(arguments[n]);return r.assign({},{files:e},{op:"merge"})};o.toCode=function(t,e){for(var n=i.getTaskParams(t),o=r.get(n,"files",[]),s=0;s<o.length;++s)"string"==typeof o[s]||o[s]instanceof String?o[s]=JSON.stringify(o[s]):o[s]=e.merge.toCode(o[s],e);return"merge("+(o.length>=10?"["+o.join(", ")+"]":o.join(", "))+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){return r.assign({},{path:t},{op:"mkdir"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return"mkdir("+(JSON.stringify(n.path)||'""')+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){return r.assign({},{path:t},{op:"list"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return"list("+(JSON.stringify(n.path)||'""')+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){return r.assign({},{path:t},{op:"read"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return"read("+(JSON.stringify(n.path)||'""')+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t,e){var n={};return r.isPlainObject(t)?n=t:r.isString(t)&&(n.url=t),r.isPlainObject(e)&&r.assign(n,e),r.assign({},n,{op:"render"})};o.toCode=function(t,e){var n=i.getTaskParams(t),r=JSON.stringify(n.url)||"";return delete n.url,0==Object.keys(n).length?"render("+r+")":"render("+r+", "+JSON.stringify(n,null,2)+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(){var t=Array.from(arguments),e=r.get(t,"[0]",""),n=r.get(t,"[1]",{});return n=r.isPlainObject(r.get(t,"[0]",{}))?r.get(t,"[0]",{}):r.assign({},{url:e},n),r.assign({},n,{op:"request"})};o.toCode=function(t,e){var n=i.getTaskParams(t),o=r.get(n,"url",""),s=Object.keys(n);return 1==s.length&&"url"==s[0]?"request("+JSON.stringify(o)+")":"request("+JSON.stringify(n,null,2)+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(){var t=Array.from(arguments);return 1==t.length&&Array.isArray(r.get(t,"[0]"))&&(t=r.get(t,"[0]",[])),r.assign({},{columns:t},{op:"select"})};o.toCode=function(t,e){var n=i.getTaskParams(t),r=JSON.stringify(n.columns)||"";return-1!=r.indexOf("[")&&-1!=r.indexOf("]")&&(r=r.substring(1,r.length-1)),"select("+r+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){return r.assign({},{steps:t},{op:"sequence"})};o.toCode=function(t,e){for(var n=i.getTaskParams(t),r=[],o=0;o<n.items.length;++o){var s=n.items[o],a=e.task.toCode(s,e);s.hasOwnProperty("params")&&s.params.hasOwnProperty("lang")&&"python"!=s.params.lang&&(a=a.replace(/\n/g,"\n  ")),r.push(a)}var r=["Flexio.pipe()"].concat(r);return r.join("\n  .")},t.exports=o},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(0),o=n(1),s=function(t,e){return o.isPipeObject(e)&&(e=e.pipe.task),i.assign({},{var:t,value:e},{op:"set"})};s.toCode=function(t,e){var n=o.getTaskParams(t),s=i.get(n,"var",""),a=i.get(n,"value","");return s=JSON.stringify(s),a="object"===(void 0===a?"undefined":r(a))&&null!==a&&a.hasOwnProperty("op")?e.task.toCode(a,e):JSON.stringify(a),"set("+s+", "+a+")"},t.exports=s},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){return r.assign({},{value:t},{op:"sleep"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return"sleep("+(JSON.stringify(n.value)||"")+")"},t.exports=o},function(t,e,n){"use strict";var r=(n(0),n(1),function(t){return t});r.toCode=function(t,e){var n=JSON.parse(JSON.stringify(t));return delete n.eid,"task("+JSON.stringify(n,null,2)+")"},t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){var e=Array.from(arguments),n={operations:[]},i={},o=[],s=r.get(e,"[0]");return r.isPlainObject(s)?1==e.length&&r.has(s,"operations")?(i=r.pick(s,["columns","operations"]),i=r.assign(n,i)):(o=[].concat(e),i={operations:o}):i={columns:void 0,operations:o},r.assign({},i,{op:"transform"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return!r.has(n,"columns")&&r.has(n,"operations")&&Array.isArray(n.operations)&&1==n.operations.length?"transform("+JSON.stringify(n.operations[0])+")":"transform("+JSON.stringify(n)+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(1),o=function(t){return r.assign({},{path:t},{op:"write"})};o.toCode=function(t,e){var n=i.getTaskParams(t);return"write("+(JSON.stringify(n.path)||'""')+")"},t.exports=o},function(t,e,n){"use strict";var r=n(0);n(1);t.exports={},t.exports.getConnectionsObject=function(t){return new function(){this.create=function(e,n){var i;if(r.isPlainObject(e))i=e;else{if(!(e instanceof t.connection))throw"Unknown connection object type";i=e.connection}return new Promise(function(e,r){t.http().post("/me/connections",i).then(function(i){t.util.callbackAdapter(null,i.data,e,r,n)}).catch(function(i){t.util.debug("Flexio.connections.create(): Failed."),t.util.callbackAdapter(i,null,e,r,n)})})},this.remove=function(e,n){return new Promise(function(r,i){t.http().request({method:"DELETE",url:"/me/connections/"+e}).then(function(e){t.util.callbackAdapter(null,e.data,r,i,n)}).catch(function(e){t.util.debug("Flexio.connections.remove(): Failed."),t.util.callbackAdapter(e,null,r,i,n)})})},this.list=function(e){var n=Array.from(arguments),e=r.get(n,"[0]");return new Promise(function(n,i){t.util.debug("Requesting Connections..."),t.http().get("/me/connections").then(function(o){var s=r.get(o,"data",[]);t.util.debug("Success!"),t.util.callbackAdapter(null,s,n,i,e)}).catch(function(r){t.util.debug("Failed."),t.util.callbackAdapter(r,null,n,i,e)})})}}}},function(t,e,n){"use strict";var r=n(0),i=n(1);t.exports={},t.exports.getPipesObject=function(t){return new function(){this.create=function(e,n){var i;if(r.isPlainObject(e))i=e;else{if(!(e instanceof t.pipe))throw"Unknown pipe object type";i=e.pipe}return new Promise(function(e,r){t.http().post("/me/pipes",i).then(function(i){t.util.callbackAdapter(null,i.data,e,r,n)}).catch(function(i){t.util.debug("Flexio.pipes.create(): Failed."),t.util.callbackAdapter(i,null,e,r,n)})})},this.remove=function(e,n){return new Promise(function(r,i){t.http().request({method:"DELETE",url:"/me/pipes/"+e}).then(function(e){t.util.callbackAdapter(null,e.data,r,i,n)}).catch(function(e){t.util.debug("Flexio.pipes.remove(): Failed."),t.util.callbackAdapter(e,null,r,i,n)})})},this.list=function(e){var n=Array.from(arguments),e=r.get(n,"[0]");return new Promise(function(n,i){t.util.debug("Requesting Pipes..."),t.http().get("/me/pipes").then(function(o){var s=r.get(o,"data",[]);t.util.debug("Success!"),t.util.callbackAdapter(null,s,n,i,e)}).catch(function(r){t.util.debug("Failed."),t.util.callbackAdapter(r,null,n,i,e)})})},this.run=function(){var e=Array.from(arguments);e.push(null,null,null);var n,o,s={},a=null;e[0]instanceof t.pipe?(o=r.get(e[0],"pipe.eid",""),a=r.get(e[0],"pipe.task","")):Array.isArray(e[0])?(o="",a=e[0]):o=e[0],r.isPlainObject(e[1])&&(s=e[1]),n=r.isFunction(e[1])?e[1]:r.isFunction(e[2])?e[2]:null;var u=function(e,n){return{contentType:n,buffer:e,get blob(){return new Blob([this.buffer],{type:n})},get text(){return t.util.arrayBufferToString(this.buffer)},get data(){try{return JSON.parse(t.util.arrayBufferToString(this.buffer))}catch(t){return null}}}};return new Promise(function(e,c){if(t.util.debug("Running Pipe `"+(0==o.length?"[Pipe Object/Task Array]":o)+"`..."),0==o.length){var f={name:"SDK Pipe",description:"SDK Pipe",task:a,process_mode:"R"};t.http().post("/me/processes",f).then(function(o){var a=r.get(o,"data",{}),f=r.get(a,"eid","");t.util.debug("Created Process.");var p={method:"post",url:"/me/processes/"+f+"/run",responseType:"arraybuffer"};r.has(s,"data")&&(p.data=s.data,r.isString(s.data)&&(p.headers={"Content-Type":"text/plain"})),r.has(s,"form")&&(p.data=i.queryString(s.form),p.headers={"Content-Type":"application/x-www-form-urlencoded"}),r.has(s,"query")&&(p.params=s.query),r.has(s,"content_type")&&(p.headers={"Content-Type":s.content_type}),t.http().request(p).then(function(i){t.util.debug("Process Complete.");var o=r.get(i,"headers.content-type","text/plain"),s=u(i.data,o);t.util.callbackAdapter(null,s,e,c,n)}).catch(function(r){t.util.debug("Process Run Failed. "+r),t.util.callbackAdapter(r,null,e,c,n)})}).catch(function(r){t.util.debug("Process Create Failed. "+r),t.util.callbackAdapter(r,null,e,c,n)})}else{var p={method:"post",url:"/me/pipes/"+o+"/run",responseType:"arraybuffer"};r.has(s,"data")&&(p.data=s.data),r.has(s,"form")&&(p.data=i.queryString(s.form),p.headers={"Content-Type":"application/x-www-form-urlencoded"}),r.has(s,"query")&&(p.params=s.query),r.has(s,"content_type")&&(p.headers={"Content-Type":s.content_type});t.http().request(p).then(function(i){t.util.debug("Process Complete.");var o=r.get(i,"headers.content-type","text/plain"),s=u(i.data,o);t.util.callbackAdapter(null,s,e,c,n)}).catch(function(r){t.util.debug("Pipe Run Call Failed. "+r),t.util.callbackAdapter(r,null,e,c,n)})}})}}}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(0);t.exports={},t.exports.getPipeConstructor=function(t){return function(e){if(!(this instanceof t.pipe))return new t.pipe(e);var n=i.assign(this,{pipe:{name:"Untitled",description:"",task:{op:"sequence",items:[]}},processes:[],_params:{},loading:!1,saving:!1,running:!1,getJSON:function(){return i.assign({},this.pipe)},getProcesses:function(){return[].concat(this.processes)},getLastProcess:function(){return i.last(this.processes)},addTask:function(t){return this.pipe.task.items.push(t),this},clearTasks:function(){return this.pipe.task.items=[],this},getTasks:function(){return this.pipe.task.items},load:function(){var e=this,n=arguments,r=Array.from(arguments),o=i.get(r,"[0]"),s=i.get(r,"[1]");return!0===this.loading||!0===this.saving||!0===this.running?(setTimeout(function(){e.load.apply(e,n)},50),this):i.isNil(o)?t.util.debug("The `identifier` parameter is required. Either the pipe's eid or pipe's alias may be used."):(this.loading=!0,t.util.debug("Loading Pipe `"+o+"`..."),t.http().get("/me/pipes/"+o).then(function(n){var r=i.get(n,"data",{});e.pipe=i.assign({},r),e.loading=!1,t.util.debug("Pipe Loaded."),"function"==typeof s&&s.call(e,null,r)}).catch(function(n){e.loading=!1,t.util.debug("Pipe Load Failed. "),"function"==typeof s&&s.call(e,n,null)}),this)},save:function(){var e=this,n=arguments,r=Array.from(arguments),o=i.get(r,"[0]"),s=i.get(r,"[0]");return!0===this.loading||!0===this.saving||!0===this.running?(setTimeout(function(){e.save.apply(e,n)},50),this):(i.isPlainObject(o)&&(i.assign(this.pipe,i.pick(o,["name","description","alias","task","schedule","schedule_status"])),s=i.get(r,"[1]")),this.saving=!0,t.util.debug("Saving Pipe `"+i.get(this.pipe,"name","Untitled Pipe")+"`..."),t.http().post("/me/pipes",this.pipe).then(function(n){var r=i.get(n,"data",{});e.pipe=i.assign({},r),e.saving=!1,t.util.debug("Pipe Saved."),"function"==typeof s&&s.call(e,null,e.pipe)}).catch(function(n){e.saving=!1,t.util.debug("Pipe Save Failed."),"function"==typeof s&&s.call(e,n,null)}),this)},run:function(){var e=Array.from(arguments);return e.unshift(this),t.pipes.run.apply(null,e)},params:function(t){return this._params=i.assign({},this.getParams(),t),this},getParams:function(){return i.assign({},this._params)},toCode:function(e){return t.task.toCode(this.pipe.task,t)}});for(var o in t.task)!function(e,r){t.task.hasOwnProperty(e)&&"toCode"!=e&&(n[e]=function(){return n.addTask(r.apply(n,arguments))})}(o,t.task[o]);return void 0!==e&&("string"==typeof e||e instanceof String?n.pipe.eid=e:"object"===(void 0===e?"undefined":r(e))&&(e=i.cloneDeep(e),e.hasOwnProperty("pipe")?n.pipe=e.pipe:e.hasOwnProperty("task")?n.pipe=e:e.hasOwnProperty("op")&&(n.pipe.task=e))),n}}},function(t,e,n){"use strict";var r=n(0),i=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"],o=["","basic","bearer","oauth2"];t.exports={},t.exports.getConnectionConstructor=function(t){return function(){return this instanceof t.connection?r.assign(this,{connection:{name:"Untitled",description:"",connection_type:"http",connection_info:{method:"",url:"",auth:"",username:"",password:"",token:"",access_token:"",refresh_token:"",expires:"",data:{},headers:{}}},loading:!1,saving:!1,running:!1,getJSON:function(){return r.assign({},this.connection)},name:function(t){return this.connection.name=t,this},description:function(t){return this.connection.description=t,this},method:function(){var t=Array.from(arguments),e=r.get(t,"[0]");if(!r.isString(e))throw"Invalid/empty method";if(-1==i.indexOf(e))throw"Invalid method";return this._setInfo("method",e)},url:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("url",e):this},auth:function(){var t=Array.from(arguments),e=r.get(t,"[0]");if(!r.isString(e))throw"Invalid/empty auth";if(-1==o.indexOf(e))throw"Invalid auth";return"none"==e&&(e=""),this._setInfo("auth",e)},username:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("username",e):this},password:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("password",e):this},token:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("token",e):this},accessToken:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("access_token",e):this},refreshToken:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isString(e)?this._setInfo("refresh_token",e):this},expires:function(){var t=Array.from(arguments),e=r.get(t,"[0]");return r.isNumber(e)&&(e=""+e),r.isString(e)?this._setInfo("expires",e):this},data:function(){var t=Array.from(arguments),e=r.get(t,"[0]");if(!r.isPlainObject(e))return this;var n=this._getInfo("data",{});return e=r.assign({},n,e),this._setInfo("data",e)},headers:function(){var t=Array.from(arguments),e=r.get(t,"[0]");if(!r.isPlainObject(e))return this;var n=this._getInfo("headers",{});return e=r.assign({},n,e),this._setInfo("headers",e)},load:function(){var e=this,n=arguments,i=Array.from(arguments),o=r.get(i,"[0]"),s=r.get(i,"[1]");return!0===this.loading||!0===this.saving||!0===this.running?(setTimeout(function(){e.load.apply(e,n)},50),this):r.isNil(o)?t.util.debug("The `identifier` parameter is required. Either the connection's eid or connection's alias may be used."):(this.loading=!0,t.util.debug("Loading Connection `"+o+"`..."),t.http().get("/me/connections/"+o).then(function(n){var i=r.get(n,"data",{});e.connection=r.assign({},i),e.loading=!1,t.util.debug("Connection Loaded."),"function"==typeof s&&s.call(e,null,i)}).catch(function(n){e.loading=!1,t.util.debug("Connection Load Failed."),"function"==typeof s&&s.call(e,n,null)}),this)},save:function(){var e=this,n=arguments,i=Array.from(arguments),o=r.get(i,"[0]"),s=r.get(i,"[0]");return!0===this.loading||!0===this.saving||!0===this.running?(setTimeout(function(){e.save.apply(e,n)},50),this):(r.isPlainObject(o)&&(r.assign(this.connection,r.pick(o,["name","description","alias"])),s=r.get(i,"[1]")),this.saving=!0,t.util.debug("Saving Connection `"+r.get(this.connection,"name","Untitled Connection")+"`..."),t.http().post("/me/connections",this.connection).then(function(n){var i=r.get(n,"data",{});e.connection=r.assign({},i),e.saving=!1,t.util.debug("Connection Saved."),"function"==typeof s&&s.call(e,null,e.connection)}).catch(function(n){e.saving=!1,t.util.debug("Connection Save Failed."),"function"==typeof s&&s.call(e,n,null)}),this)},_getInfo:function(t,e){return r.get(this.connection,"connection_info."+t,e)},_setInfo:function(t,e){return this.connection.hasOwnProperty("connection_info")||(this.connection.connection_info={}),this.connection.connection_info[t]=e,this}}):new t.connection}}},function(t,e,n){"use strict";function r(t){this.options=o.isPlainObject(t)?t:{},this.post=function(t,e,n){return this.request(o.assign(n||{},{method:"POST",url:t,data:e}))},this.get=function(t,e){return this.request(o.assign(e||{},{method:"GET",url:t}))},this.isFormData=function(t){return"undefined"!=typeof FormData&&t instanceof FormData},this.isBlob=function(t){return"undefined"!=typeof Blob&&t instanceof Blob},this.isStream=function(t){return null!==t&&"object"===(void 0===t?"undefined":i(t))&&"function"==typeof t.pipe},this.request=function(t){function e(e){o.has(t,"headers")||(t.headers={}),o.has(t.headers,"Content-Type")||(t.headers["Content-Type"]=e)}var r=o.get(this.options,"baseURL",""),a=o.get(t,"url","");-1!=a.indexOf("://")?r=a:(a="/"==a.substr(0,1)?a.substr(1):a,"/"!=r.slice(-1)&&(r+="/"),r+=a),t=o.assign({},t,{url:r});var u=o.get(t,"data",null);if(this.isFormData(u)||this.isBlob(u)||this.isStream(u)||u instanceof ArrayBuffer);else if(null!==u&&"object"===(void 0===u?"undefined":i(u)))"application/x-www-form-urlencoded"==o.get(t,"headers.Content-Type","")?t.data=s.queryString(t.data):(t.data=JSON.stringify(u),e("application/json"));else{var c=o.get(t,"method","").toUpperCase();"POST"!=c&&"PUT"!=c&&"PATCH"!=c||e("application/x-www-form-urlencoded")}return s.isNodeJs()?n(!function(){var t=new Error('Cannot find module "./http-node"');throw t.code="MODULE_NOT_FOUND",t}()).apply(this,[t]):n(35).apply(this,[t])}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(0),s=n(1);t.exports={create:function(t){return new r(t)}}},function(t,e,n){"use strict";function r(t){function e(t){for(var e={},n=t?t.split("\r\n"):[],r=0,i=n.length;r<i;r++){var o=n[r].indexOf(":");o>0&&(e[n[r].substr(0,o).trim()]=n[r].substr(o+1).trim())}return e}var n=i.assign({},i.get(this.options,"headers",{}),i.get(t,"headers",{})),r=i.get(t,"data",null);"undefined"!=typeof FormData&&r instanceof FormData&&delete n["Content-Type"];var o=t.url;if(t.params){var s=Object.keys(t.params).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t.params[e])}).join("&");o+=o.indexOf("?")<0?"?"+s:"&"+s}return new Promise(function(i,s){function a(e){var n=t.responseType&&"text"!==t.responseType?e.response:e.responseText;if("string"==typeof n)try{n=JSON.parse(n)}catch(t){}return n}var u=new XMLHttpRequest;if(u.open(t.method.toUpperCase(),o,!0),t.responseType&&(u.responseType=t.responseType),Object.keys(n).length>0)for(var c in n)n.hasOwnProperty(c)&&u.setRequestHeader(c,n[c]);u.onload=function(){var n=a(u),r={data:n,status:1223===u.status?204:u.status,statusText:1223===u.status?"No Content":u.statusText,headers:e(u.getAllResponseHeaders()),config:t,request:u};i(r),u=null},u.onerror=function(){var n=a(u),r={data:n,status:u.status,statusText:u.statusText,headers:e(u.getAllResponseHeaders()),config:t,request:u};s(r),u=null},u.send(r)})}var i=n(0);t.exports=r}]).default});